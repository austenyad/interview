#### 什么是单元测试？

一般而言，尤其是在 OOP 领域，是对一个类的方法进行测试。可以理解是为了一个类的某个方法能否正常工作，而写的测试代码。

我们举一个例子说明一下，假如你有一个类，定义如下：

```java
public class Calculator {
    public int add(int one, int another) {
        //为了简单起见，暂不考虑溢出等情况。
        return one + another;
    }
}
```

那么为了测试这个`Calculator`类的`add()`方法，我们可以写如下的单元测试代码：

```java
public class CalculatorTest {
    public void testAdd() throws Exception {
        Calculator calculator = new Calculator();
        int sum = calculator.add(1, 2);
        Assert.assertEquals(3, sum);
    }
}
```

一般我们只测试 public 的方法，非 public 的方法是不测试的，因为非 public 方法是这个类的实现细节我们并不关心，我们只关心某个plublic 方法的输入和输出。
一般来说，一个方法的测试方法主要分为3部分：1. setup。一般是 new 出你要测试的那个类，以及其他一些前提条件的设置。2. 执行操作。一般是调用你要测试的方法，获取运行结果。3. 验证结果。 验证得到的结果是否跟预期一样。

#### 如何在一个 Android Project 里面运行单元测试

Android Studio 里面可以通过 gradle testDebug Unit Test,或 gradle testRelease UnitTest，分别运行 debug 和 release 版本的 unit testing,这种方式可以一次运行所有的测试方法。每个 test case 的报告可以在 project_root/app/build/reports/tests/debug/index.html 这里看到。

#### 单元测试不是集成测试



Test Pyramid 理论基本大意是，单元测试是基础，是我们应该花绝大多数时间去写的部分，而集成测试等应该是冰山上面能看见的那一小部分。为什么是这样呢？因为集成测试设置起来很麻烦，运行起来很慢，发现的 bug 少，在保证代码质量、改善代码设计方面更起不到任何作用，因此它的重要程度并不是那么高，也无法将它纳入我们正常的工作流程中。而单元测试则刚好相反，它运行速度超快，能发现的 bug 更多，在开发时能引导更好的代码设计，在重构时能保证重构的正确性，因此它能保证我们的代码在一个比较高的质量水平上。同时因为运行速度快，我们很容易把它纳入到我们正常的开发流程中。至于为什么集成测试发现的 bug 少，而单元测试发现的 bug 多，这里也稍作解释，因为集成测试不能测试到其中每个环节的每个方面，某一个集成测试运行正确了，不代表另一个集成测试也能运行正确。而单元测试会比较完整的测试每个单元的各种不同的状况、临界条件等等。一般来说，如果每一个环节是对的，那么在很大的概率上，整个流程就是对的。虽然不能保证整个流程 100%一定是对的。所以，集成测试需要有，但应该是少量，单元测试是我们应该花重点去做的事情。

一般来讲，单元测试不会接触到数据库，不会接触到网络，不会接触到一些复杂的外部环境，如果有的话，那可能是你测试的方法有误，测试的粒度不够 “单元”。

#### 两种函数（方法），不同的测试方法

一个类的方法可以分为两种，一种是有返回值的，另一种是没返回值的。